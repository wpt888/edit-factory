---
phase: 04-tts-provider-selection
plan: 06
type: execute
wave: 4
depends_on: ["04-05"]
files_modified:
  - frontend/src/components/ui/radio-group.tsx
  - frontend/src/components/tts/provider-selector.tsx
  - frontend/src/components/tts/voice-cloning-upload.tsx
  - frontend/src/app/settings/page.tsx
autonomous: true

must_haves:
  truths:
    - "User can see list of TTS providers with cost badges"
    - "User can select a TTS provider via radio group"
    - "User can upload voice sample for cloning"
    - "Settings page shows TTS configuration section"
  artifacts:
    - path: "frontend/src/components/ui/radio-group.tsx"
      provides: "Shadcn RadioGroup component"
      exports: ["RadioGroup", "RadioGroupItem"]
    - path: "frontend/src/components/tts/provider-selector.tsx"
      provides: "TTS provider selection UI"
      exports: ["ProviderSelector"]
    - path: "frontend/src/components/tts/voice-cloning-upload.tsx"
      provides: "Voice sample upload with validation"
      exports: ["VoiceCloningUpload"]
    - path: "frontend/src/app/settings/page.tsx"
      provides: "Settings page with TTS section"
  key_links:
    - from: "frontend/src/components/tts/provider-selector.tsx"
      to: "frontend/src/components/ui/radio-group.tsx"
      via: "imports RadioGroup"
      pattern: "from.*ui/radio-group"
    - from: "frontend/src/app/settings/page.tsx"
      to: "frontend/src/components/tts/provider-selector.tsx"
      via: "imports ProviderSelector"
      pattern: "from.*tts/provider-selector"
---

<objective>
Create frontend TTS UI components: provider selector with cost badges, voice cloning upload, and settings page.

Purpose: Enable users to configure TTS settings per profile with clear cost visibility and voice cloning capability.

Output: RadioGroup component, ProviderSelector, VoiceCloningUpload, and Settings page.
</objective>

<execution_context>
@/home/ukfdb/.claude/get-shit-done/workflows/execute-plan.md
@/home/ukfdb/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/04-tts-provider-selection/04-RESEARCH.md

# Existing UI components for patterns
@frontend/src/components/ui/button.tsx
@frontend/src/components/ui/card.tsx
@frontend/src/components/ui/badge.tsx
@frontend/src/components/ui/label.tsx
@frontend/src/lib/api.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add RadioGroup component via Shadcn CLI</name>
  <files>frontend/src/components/ui/radio-group.tsx</files>
  <action>
Add Shadcn RadioGroup component:

Run from frontend directory:
```bash
cd frontend && npx shadcn@latest add radio-group --yes
```

This creates radio-group.tsx with RadioGroup and RadioGroupItem exports.

If CLI fails, create manually using Radix UI primitive:
- Import RadioGroup from @radix-ui/react-radio-group
- Style with Tailwind classes matching existing Shadcn components
- Export RadioGroup, RadioGroupItem
  </action>
  <verify>
```bash
test -f "/mnt/c/OBSID SRL/n8n/edit_factory/frontend/src/components/ui/radio-group.tsx" && echo "radio-group.tsx exists"
```
  </verify>
  <done>
RadioGroup component installed and available.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create ProviderSelector component</name>
  <files>
    frontend/src/components/tts/provider-selector.tsx
  </files>
  <action>
Create ProviderSelector component with card-based radio selection:

1. Create directory: frontend/src/components/tts/

2. Create provider-selector.tsx:
```tsx
"use client"

import { RadioGroup, RadioGroupItem } from "@/components/ui/radio-group"
import { Label } from "@/components/ui/label"
import { Badge } from "@/components/ui/badge"
import { Card, CardContent } from "@/components/ui/card"

interface TTSProvider {
  id: string
  name: string
  description: string
  costPer1kChars: number
  available: boolean
  supportsVoiceCloning: boolean
}

const TTS_PROVIDERS: TTSProvider[] = [
  { id: "elevenlabs", name: "ElevenLabs", description: "Premium quality, natural-sounding voices", costPer1kChars: 0.22, available: true, supportsVoiceCloning: false },
  { id: "edge", name: "Edge TTS", description: "Microsoft Edge voices, completely free", costPer1kChars: 0, available: true, supportsVoiceCloning: false },
  { id: "coqui", name: "Coqui XTTS", description: "Voice cloning with 6-second sample", costPer1kChars: 0, available: true, supportsVoiceCloning: true },
  { id: "kokoro", name: "Kokoro TTS", description: "Fast lightweight local TTS", costPer1kChars: 0, available: true, supportsVoiceCloning: false },
]

interface ProviderSelectorProps {
  value: string
  onChange: (provider: string) => void
  disabled?: boolean
}

export function ProviderSelector({ value, onChange, disabled }: ProviderSelectorProps)
```

3. Render cards in 2-column grid with:
   - RadioGroupItem for selection
   - Provider name as Label
   - Cost Badge: green "Free" or "$X.XX/1k chars"
   - Description text
   - "Voice Cloning Available" badge if supported
   - Visual selection state (border highlight, ring)

4. Style with Tailwind matching existing components
  </action>
  <verify>
```bash
test -f "/mnt/c/OBSID SRL/n8n/edit_factory/frontend/src/components/tts/provider-selector.tsx" && echo "provider-selector.tsx exists"
```
  </verify>
  <done>
ProviderSelector component with card-based provider selection and cost badges.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create VoiceCloningUpload and Settings page</name>
  <files>
    frontend/src/components/tts/voice-cloning-upload.tsx
    frontend/src/app/settings/page.tsx
  </files>
  <action>
Create voice cloning upload component and settings page:

**voice-cloning-upload.tsx:**
1. Create component with:
   - File input accepting audio formats (audio/*)
   - Voice name text input
   - Upload button with loading state
   - Requirements alert (10-20 seconds, clear speech, etc.)
   - Client-side duration validation using Audio element

2. Use apiPost to call /tts/clone-voice with FormData

3. Show success message with voice_id or error with details

**settings/page.tsx:**
1. Create settings page with TTS section:
   - Card header: "Text-to-Speech Provider"
   - ProviderSelector component
   - Voice selector dropdown (loaded from /tts/voices API)
   - VoiceCloningUpload (visible only when Coqui selected)
   - Save button

2. Load current settings from profile context

3. Save settings via profile update API

4. Use existing patterns from library/page.tsx for loading states
  </action>
  <verify>
```bash
test -f "/mnt/c/OBSID SRL/n8n/edit_factory/frontend/src/components/tts/voice-cloning-upload.tsx" && \
test -f "/mnt/c/OBSID SRL/n8n/edit_factory/frontend/src/app/settings/page.tsx" && \
echo "Both files exist"
```
  </verify>
  <done>
VoiceCloningUpload component and Settings page with TTS configuration.
  </done>
</task>

</tasks>

<verification>
1. radio-group.tsx exists with RadioGroup export
2. provider-selector.tsx renders provider cards with cost badges
3. voice-cloning-upload.tsx handles file upload with validation
4. settings/page.tsx shows TTS configuration section
5. Build succeeds: `cd frontend && npm run build`
</verification>

<success_criteria>
- RadioGroup component available
- ProviderSelector shows 4 providers with cost badges
- VoiceCloningUpload validates duration client-side
- Settings page integrates all TTS components
- No TypeScript errors
- Build completes successfully
</success_criteria>

<output>
After completion, create `.planning/phases/04-tts-provider-selection/04-06-SUMMARY.md`
</output>
